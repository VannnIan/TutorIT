<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching Room - TutorIT</title>
    <meta name="description" content="Find study partners and start collaborative learning sessions on TutorIT.">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
</head>
<body>
    <section class="section">
        <!-- Header -->
        <header class="header">
            <a href="./index.html" class="logo">TutorIT</a>
            <nav class="navigation">
                <a href="./index.html" class="nav-link">Home</a>
                <a href="subjects.html" class="nav-link">Mata Kuliah</a>
                <a href="matchingRoom.html" class="nav-link active">Ruang Belajar</a>
                <a href="#" class="nav-link">Review</a>
                <a href="quiz.html" class="nav-link">Kuis</a>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="content">
            <div class="container">
                <div class="card animate-fade-in">
                    <div class="card-header">
                        <h1 class="card-title">
                            <i class="fas fa-users me-2"></i>
                            Find Study Partners
                        </h1>
                        <p class="card-subtitle">Connect with other students for collaborative learning</p>
                    </div>

                    <!-- Profile Section -->
                    <div class="flex justify-center items-center gap-2xl mb-2xl">
                        <div class="flex flex-col items-center gap-lg">
                            <div class="w-36 h-36 rounded-full bg-primary-lighter border-4 border-primary-color flex items-center justify-center">
                                <i class="fas fa-user text-4xl text-primary-color"></i>
                            </div>
                            <p class="text-lg font-medium text-primary-color">Your Profile</p>
                        </div>
                        <div class="flex flex-col items-center">
                            <i class="fas fa-arrow-right text-2xl text-primary-color"></i>
                        </div>
                        <div class="flex flex-col items-center gap-lg">
                            <div class="w-36 h-36 rounded-full bg-primary-lighter border-4 border-primary-color flex items-center justify-center">
                                <i class="fas fa-user-plus text-4xl text-primary-color"></i>
                            </div>
                            <p class="text-lg font-medium text-primary-color">Study Partner</p>
                        </div>
                    </div>

                    <!-- Matching Preferences -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-2xl mb-2xl">
                        <!-- Subjects You Need Help With -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-question-circle me-2"></i>
                                    Subjects You Need Help With
                                </h2>
                            </div>
                            <div class="space-y-md">
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="needSubject1">Empty</span>
                                </div>
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="needSubject2">Empty</span>
                                </div>
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="needSubject3">Empty</span>
                                </div>
                            </div>
                        </div>

                        <!-- Subjects You Can Help With -->
                        <div class="card">
                            <div class="card-header">
                                <h2 class="card-title">
                                    <i class="fas fa-lightbulb me-2"></i>
                                    Subjects You Can Help With
                                </h2>
                            </div>
                            <div class="space-y-md">
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="helpSubject1">Empty</span>
                                </div>
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="helpSubject2">Empty</span>
                                </div>
                                <div class="flex items-center p-md bg-primary-lighter rounded-lg">
                                    <span class="font-medium" id="helpSubject3">Empty</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Study Session Options -->
                    <div class="card mb-2xl">
                        <div class="card-header">
                            <h2 class="card-title">
                                <i class="fas fa-cog me-2"></i>
                                Study Session Preferences
                            </h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-lg">
                            <div class="flex items-center gap-md p-md bg-primary-lighter rounded-lg">
                                <i class="fas fa-clock text-primary-color"></i>
                                <div>
                                    <p class="font-medium">Duration</p>
                                    <p class="text-sm text-muted">30-60 minutes</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-md p-md bg-primary-lighter rounded-lg">
                                <i class="fas fa-users text-primary-color"></i>
                                <div>
                                    <p class="font-medium">Group Size</p>
                                    <p class="text-sm text-muted">1-2 students</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-md p-md bg-primary-lighter rounded-lg">
                                <i class="fas fa-video text-primary-color"></i>
                                <div>
                                    <p class="font-medium">Video Call</p>
                                    <p class="text-sm text-muted">Required</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-center gap-lg">
                        <a href="#" class="btn btn-primary" id="findPartnerBtn">
                            <i class="fas fa-search me-2"></i>
                            Find Study Partner
                        </a>
                        <a href="subjects.html" class="btn btn-secondary">
                            <i class="fas fa-edit me-2"></i>
                            Update Preferences
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <!-- Social Media Icons -->
        <div class="social-icons">
            <a href="#" class="social-link" aria-label="Facebook">
                <i class="fab fa-facebook"></i>
            </a>
            <a href="#" class="social-link" aria-label="Twitter">
                <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-link" aria-label="Instagram">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
    </section>

    <script>
        // Subject mapping for display
        const subjectNames = {
            'discrete-math': 'Discrete Mathematics',
            'linear-algebra': 'Linear Algebra',
            'basic-statistics': 'Basic Statistics',
            'algorithm-programming': 'Algorithm and Programming',
            'program-design': 'Program Design Methods',
            'indonesian': 'Indonesian',
            'data-structures': 'Data Structures',
            'calculus': 'Calculus',
            'scientific-computing': 'Scientific Computing',
            'hci': 'Human and Computer Interaction',
            'algorithm-design': 'Algorithm Design and Analysis',
            'computer-networks': 'Computer Networks',
            'computational-physics': 'Computational Physics',
            'database-technology': 'Database Technology',
            'artificial-intelligence': 'Artificial Intelligence',
            'oop': 'Object Oriented Programming',
            'computational-biology': 'Computational Biology',
            'software-engineering': 'Software Engineering',
            'database-design': 'Database Design'
        };

        // Function to load and display user's subject choices
        function loadUserSubjects() {
            // Get subjects from localStorage
            const needSubjects = [
                localStorage.getItem('needSubject1'),
                localStorage.getItem('needSubject2'),
                localStorage.getItem('needSubject3')
            ];
            
            const helpSubjects = [
                localStorage.getItem('helpSubject1'),
                localStorage.getItem('helpSubject2'),
                localStorage.getItem('helpSubject3')
            ];

            // Display need subjects
            needSubjects.forEach((subject, index) => {
                const element = document.getElementById(`needSubject${index + 1}`);
                if (subject && subject !== 'null') {
                    element.textContent = subjectNames[subject] || subject;
                    element.classList.remove('text-muted');
                } else {
                    element.textContent = 'Empty';
                    element.classList.add('text-muted');
                }
            });

            // Display help subjects
            helpSubjects.forEach((subject, index) => {
                const element = document.getElementById(`helpSubject${index + 1}`);
                if (subject && subject !== 'null') {
                    element.textContent = subjectNames[subject] || subject;
                    element.classList.remove('text-muted');
                } else {
                    element.textContent = 'Empty';
                    element.classList.add('text-muted');
                }
            });

            // Check if all subjects are empty
            const allNeedEmpty = needSubjects.every(subject => !subject || subject === 'null');
            const allHelpEmpty = helpSubjects.every(subject => !subject || subject === 'null');
            
            return !allNeedEmpty && !allHelpEmpty;
        }

        // Function to handle Find Study Partner button click
        function handleFindPartner() {
            const hasSubjects = loadUserSubjects();
            
            if (!hasSubjects) {
                alert('Please input the subjects first');
                return false;
            }
            
            // If subjects are selected, proceed to study room
            window.location.href = 'studyroom.html';
            return true;
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Load subjects on page load
            loadUserSubjects();
            
            // Add click event to Find Study Partner button
            document.getElementById('findPartnerBtn').addEventListener('click', function(e) {
                e.preventDefault();
                handleFindPartner();
            });
        });
    </script>
</body>
</html>